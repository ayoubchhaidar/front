
<div  class="section_our_solution"*ngIf="type === 'En Attends'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses">
          <div class="solution_card">
            <span class="close" (click)="delete_course(course.id,course.tutor,course.title)">&times;</span>
            <span class="accept" (click)="verifyCourse(course.id,course.tutor,course.title)" >&#10003;</span>
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description">
              <p>{{course.description}}</p>
              <button type="button" class="read_more_btn"class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" [routerLink]="['/dashboard/lesoon']" [queryParams]="{ CourseId: course.id }">Read More</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section_our_solution"*ngIf="type === 'Verifier'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses">
          <div class="solution_card">
            <span class="close" (click)="delete_course(course.id,course.tutor,course.title)">&times;</span>
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description">
              <p>{{course.description}}</p>
              <button type="button" class="read_more_btn" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" [routerLink]="['/dashboard/lesoon']" [queryParams]="{ CourseId: course.id }">Read More</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="section_our_solution"*ngIf="type === 'tutor'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses">
          <div class="solution_card">
            <span class="close" (click)="delete_course(course.id,course.tutor,course.title)">&times;</span>
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description">
              <p>{{course.description}}</p>
              <button type="button" class="read_more_btn" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" [routerLink]="['/dashboard/lesoon']" [queryParams]="{ CourseId: course.id }">Read More</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section_our_solution"*ngIf="type === 'all'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses">
          <div class="solution_card">
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description"  style="margin-top: 30px;">
              <div class="user-profile">
                <img class="profile-image" src="{{ getUserInfoById(course.tutor)?.image }}" alt="User Image">
                <p class="username">Par {{getUserInfoById(course.tutor)?.username}}</p>
            </div>
            
            
            
              
              <!-- Use ngIf to conditionally render the button -->
              <button *ngIf="!isUserAlreadyEnrolled(course.id) && !isUserAlreadyEnrolledW(course.id)" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" type="button" 
                      class="read_more_btn" 
                      (click)="EnrollInCourse(course.id,course.tutor,course.title)">
                inscrire
              </button>
              <button *ngIf="isUserAlreadyEnrolled(course.id)" type="button" class="read_more_btn"class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" [routerLink]="['/dashboard/lesoon']" [queryParams]="{ CourseId: course.id }">Read More</button>
              <p *ngIf="isUserAlreadyEnrolledW(course.id)" style="position: absolute; bottom: 10px; left: 10px; width: calc(100% - 0px); text-align: center; font-weight: bold;">En attente d'acceptation</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section_our_solution"*ngIf="type === 'waiting'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses ">
          <div class="solution_card">
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description">
              <p>{{course.description}}</p>
              <p *ngIf="isUserAlreadyEnrolledW(course.id)" style="position: absolute; bottom: 10px; left: 10px; width: calc(100% - 0px); text-align: center; font-weight: bold;">En attente d'acceptation</p>
  
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="section_our_solution"*ngIf="type === 'inscrit'" >
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let course of filteredCourses">
          <div class="solution_card">
            <div class="hover_color_bubble"></div>
            <div class="so_top_icon">
              <img src="{{ course.image }}" alt="">
            </div>
            <div class="solu_title">
              <h3>{{course.title}}</h3>
            </div>
            <div class="solu_description"  style="margin-top: 30px;">
              <div class="user-profile">
                <img class="profile-image" src="{{ getUserInfoById(course.tutor)?.image }}" alt="User Image">
                <p class="username">Par {{getUserInfoById(course.tutor)?.username}}</p>
            </div>
              <div class="progress" style="margin-top: 30px;font-weight: bold;">
                <div class="progress-bar"
                     role="progressbar"
                     [style.width.%]="course.pourcentage"
                     aria-valuemin="0"
                     aria-valuemax="100">
                  {{ course.pourcentage }}%
                </div>
              </div>
              <button type="button" class="read_more_btn" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" [routerLink]="['/submissions']" [queryParams]="{ CourseId: course.id }">Read More</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section_our_solution" *ngIf="type === 'accepter'">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box" *ngFor="let enrollment of filteredCourses">
          <div class="solution_card " style="width:400px;min-height:150px">
            <div class="hover_color_bubble"></div>
            <div class="solu_title" style="margin-top: 0px;
            margin-bottom: 0px;">
              <h3 style="display: inline-block ;margin-top: 5px;
              margin-bottom: 0px;">Nom d'utilisateur :  </h3><p  style="display: inline-block; margin-left: 5px;">{{ getUsernameByid(enrollment.student) }}</p><br>
              <h3 style="display: inline-block;margin-top: 5px;
              margin-bottom: 0px;">Titre de cour : </h3> <p  style="display: inline-block; margin-left: 5px;"> {{ getcoursetitleByid(enrollment.course) }}</p>
            </div>
              <div class="solu_description">
              <button type="button" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;" (click)="verifEnrollment(enrollment.id,true,enrollment.student)"style="margin-right:20px;margin-left:150px">accepter</button>
              <button  type="button" class="read_more_btn" style="position: absolute; bottom: 10px; right: 10px; text-align: center; font-weight: bold;"  (click)="verifEnrollment(enrollment.id,false,enrollment.student)">refuser</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
